{% extends "layout.html" %}

{% block pageTitle %}
  {% if errorList.length > 0 %}
    Error:
  {% endif %}
  Appealing for other reasons
{% endblock %}
{% block backLink %}
  {{ govukBackLink({
    text: "Back",
    href: "choose-reason"
  }) }}
{% endblock %}
{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <form action="" method="post">
        {% if errorList.length > 0 %}
          {{ govukErrorSummary({
            titleText: "There is a problem",
            errorList: errorList
          }) }}
        {% endif %}
        <h1 class="govuk-heading-xl">Tell us why you're appealing this penalty</h1>
        <p class="govuk-body-l">Anything you tell us to support your appeal will be kept confidential.</p>
        {% if errTitle.flag %}
          {% set titleError = {
            text: errTitle.text
          } %}
        {% else %}
          {% set titleError = false %}
        {% endif %}

        {% if errName.flag %}
          {% set nameError = {
            text: errName.text
          } %}
        {% else %}
          {% set nameError = false %}
        {% endif %}

        {% if errRelationship.flag %}
          {% set relationshipError = {
            text: errRelationship.text
          } %}
        {% else %}
          {% set relationshipError = false %}
        {% endif %}

{% set hintHTML %}
<details class="govuk-details" data-module="govuk-details">
  <summary class="govuk-details__summary">
    <span class="govuk-details__summary-text">
      What details should I include to support my appeal?
    </span>
  </summary>
  <div class="govuk-details__text">
    <p>You should include:</p>
    <ul class="govuk-list govuk-list--bullet">
    <li>any relevant dates - for example, the date of an incident that prevented the accounts from being filed (for example, a fire or bereavement), or the dates that a problem began and ended</li>
    <li>names of people or organisations that prevented accounts from being filed on time, and their relationship to the company</li>
    </ul>
    <p>If the person who usually files the accounts was not able to, tell us why no one else could file them.</p>
    <p>If you were give advice by Companies House, include details of when and how you contacted us.</p>
  </div>
</details>
{% endset %}

        {{ govukInput({
          id: "user-name",
          name: "userName",
          errorMessage: nameError,
          label: {
            text: "Your name"
          },
          value: userName
        }) }}

        {{ govukInput({
          id: "user-relationship",
          name: "userRelationship",
          errorMessage: relationshipError,
          label: {
            text: "Your relationship to the company"
          },
          value: userRelationship
        }) }}

        {{ govukInput({
          id: "other-reason",
          name: "otherReason",
          errorMessage: titleError,
          label: {
            text: "Short title for the reason"
          },
          value: otherReason
        }) }}

        {% if errDescription.flag %}
          {% set descriptionError = {
            text: errDescription.text
          } %}
        {% else %}
          {% set descriptionError = false %}
        {% endif %}

        {{ govukTextarea({
          name: "otherInformation",
          id: "other-information",
          errorMessage: descriptionError,
          rows: '8',
          label: {
            text: "Detailed description of the reason",
            isPageHeading: false,
            classes: 'govuk-heading-large',
            value: otherInformation
          },
          hint: {
        html: hintHTML
        }
        }) }}
        {{ govukInput({
          id: "edit-id",
          name: "editId",
          type: "hidden",
          value: id
        }) }}
        {{ govukButton({
          text: "Continue"
        }) }}
      </form>
    </div>
  </div>

{% endblock %}
