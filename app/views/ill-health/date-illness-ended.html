{% extends "layout.html" %}

{% block pageTitle %}
  {% if errorList.length > 0 %}
    Error:
  {% endif %}
  Appeal due to ill health: Tell us when the illness ended
{% endblock %}

{% block main %}

  <div class="govuk-width-container">
    {{ govukPhaseBanner({
      tag: {
        text: "alpha"
      },
      html: 'This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
    }) }}
    {{ govukBackLink({
      text: "Back",
      href: "continued-illness"
    }) }}
    <main role="main" class="govuk-main-wrapper">
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

          {% if errorList.length > 0 %}
            {{ govukErrorSummary({
              titleText: "There was a problem with the date you gave us",
              errorList: errorList
            }) }}
          {% endif %}

          <form action="" method="post">

            {% if errorList.length > 0 %}
              {% set endDateError = {
                text: endDateErr.text
              } %}
            {% else %}
              {% set endDateError = false %}
            {% endif %}

            {% set hintHTML %}
            You told us the illness started on
            {{ startDate.day }}
            {{ startDate.month | displayMonth }}
            {{ startDate.year }}
            {% endset -%}

            {{ govukDateInput({
              id: 'illness-end',
              name: 'illnessEnd',
              errorMessage: endDateError,
              fieldset: {
                legend: {
                  text: 'When did the illness end?',
                  isPageHeading: true,
                  classes: 'govuk-fieldset__legend--xl'
                }
              },
              hint: {
                html: hintHTML
              },
              items: [
                {
                  name: 'day',
                  id: 'illness-end-day',
                  value: endDate.day,
                  classes: inputClasses.day
                },
                {
                  name: 'month',
                  id: 'illness-end-month',
                  value: endDate.month,
                  classes: inputClasses.month
                },
                {
                  name: 'year',
                  id: 'illness-end-year',
                  value: endDate.year,
                  classes: inputClasses.year
                }
              ]
              })
            }}

            {{ govukButton({
              text: "Continue"
            }) }}
          </form>
        </div>
      </div>
    </main>
  </div>

{% endblock %}